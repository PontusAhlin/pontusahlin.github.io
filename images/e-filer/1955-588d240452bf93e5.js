"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1955],{1046:function(e,r,t){var n=t(4730),a=t(67294);let l=["styles"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}r.Z=e=>{let{styles:r={}}=e,t=(0,n.Z)(e,l);return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"-367 247.5 106.8 100.8"},t),a.createElement("path",{d:"M-333.3 300.2l4.4-28.1h-4.8c-2.2 0-5.1-1.2-6-3.5-.3-.8-.9-3.5 2.8-6.1 1.3-.9 2.2-1.9 2.3-2.7.2-.8 0-1.5-.6-2.1-.7-.7-2.3-1.2-4.3-1.2-3.4 0-5.8 2-6 3.4-.2 1.1.7 1.9 1.4 2.4 2.1 1.6 2.6 3.9 1.3 6.1-1.4 2.2-4.3 3.7-7.4 3.7h-4.9c-.4 2.7-7 44.7-7.5 48h26.4c.1-1.4 1.3-9.4 2.9-19.9zm35.3-52.7h-26.8l-3.6 22.7h4.6c2.5 0 4.9-1.1 5.9-2.8.3-.5.5-1 .5-1.4 0-.9-.6-1.7-1.3-2.1-1.8-1.3-2.1-2.7-2.1-3.7v-.5c.4-2.4 3.6-5 7.9-5 2.6 0 4.5.6 5.7 1.7 1 1 1.5 2.4 1.2 3.8-.4 1.7-2.1 3.1-3.1 3.8-2.6 1.8-2.3 3.4-2.1 3.9.5 1.4 2.6 2.3 4.2 2.3h7c9.5.1 14.6 4.4 12.9 14.6-1.5 9.4-8.7 13.5-17.3 13.6l-3.6 21.7h5c21.3 0 38.6-13.7 42.1-35.2 4.3-26.7-12.7-37.4-37.1-37.4zm-66.1 82.3h10.8c4.6 0 5.7 2.3 5.4 4.5-.3 1.7-1.4 3-3.5 3.8 2.6 1 3.6 2.5 3.2 4.9-.5 3-3.1 5.2-6.5 5.2H-367l2.9-18.4zm7.1 7.7c2.1 0 3.1-1.1 3.3-2.4.2-1.4-.4-2.4-2.5-2.4h-1.9l-.8 4.8h1.9zm-1.2 8c2.2 0 3.4-.9 3.7-2.7.2-1.5-.6-2.5-2.7-2.5h-2.1l-.8 5.2h1.9zm25 2.9c-2.8.2-4.2-.1-4.8-1.3-1.5.9-3.1 1.4-4.9 1.4-3.2 0-4.3-1.6-4-3.5.1-.9.6-1.7 1.5-2.4 1.7-1.5 6.1-1.7 7.8-2.9.1-1.3-.4-1.8-2-1.8-1.9 0-3.4.6-6.1 2.4l.6-4.2c2.3-1.7 4.5-2.4 7.1-2.4 3.3 0 6.2 1.3 5.6 4.9l-.6 4.1c-.2 1.4-.2 1.9 1.4 1.9l-1.6 3.8zm-4.8-6.3c-1.5.9-4.3.8-4.6 2.7-.1.9.4 1.6 1.3 1.6s2-.4 2.8-1c-.1-.3 0-.7.1-1.3l.4-2zm10.1-8.1h5.6l-.3 1.9c1.8-1.5 3.1-2.1 4.9-2.1 3.1 0 4.6 1.9 4.1 5.1l-1.5 9.4h-5.6l1.2-7.8c.2-1.4-.2-2.1-1.3-2.1-.9 0-1.7.5-2.5 1.5l-1.3 8.3h-5.6l2.3-14.2zm18.7-4.2h5.6l-1.4 9.1 5.4-4.9h6.9l-6.9 6.1 5.5 8.2h-7.1l-4.3-6.6h-.1l-1 6.6h-5.6l3-18.5z"}),a.createElement("path",{d:"M-364.1 329.8h10.8c4.6 0 5.7 2.3 5.4 4.5-.3 1.7-1.4 3-3.5 3.8 2.6 1 3.6 2.5 3.2 4.9-.5 3-3.1 5.2-6.5 5.2H-367l2.9-18.4zm7.1 7.7c2.1 0 3.1-1.1 3.3-2.4.2-1.4-.4-2.4-2.5-2.4h-1.9l-.8 4.8h1.9zm-1.2 8c2.2 0 3.4-.9 3.7-2.7.2-1.5-.6-2.5-2.7-2.5h-2.1l-.8 5.2h1.9zm25 2.9c-2.8.2-4.2-.1-4.8-1.3-1.5.9-3.1 1.4-4.9 1.4-3.2 0-4.3-1.6-4-3.5.1-.9.6-1.7 1.5-2.4 1.7-1.5 6.1-1.7 7.8-2.9.1-1.3-.4-1.8-2-1.8-1.9 0-3.4.6-6.1 2.4l.6-4.2c2.3-1.7 4.5-2.4 7.1-2.4 3.3 0 6.2 1.3 5.6 4.9l-.6 4.1c-.2 1.4-.2 1.9 1.4 1.9l-1.6 3.8zm-4.8-6.3c-1.5.9-4.3.8-4.6 2.7-.1.9.4 1.6 1.3 1.6s2-.4 2.8-1c-.1-.3 0-.7.1-1.3l.4-2zm10.1-8.1h5.6l-.3 1.9c1.8-1.5 3.1-2.1 4.9-2.1 3.1 0 4.6 1.9 4.1 5.1l-1.5 9.4h-5.6l1.2-7.8c.2-1.4-.2-2.1-1.3-2.1-.9 0-1.7.5-2.5 1.5l-1.3 8.3h-5.6l2.3-14.2zm18.7-4.2h5.6l-1.4 9.1 5.4-4.9h6.9l-6.9 6.1 5.5 8.2h-7.1l-4.3-6.6h-.1l-1 6.6h-5.6l3-18.5zm19.8 0h6.5l-2.9 18.4h-6.5l2.9-18.4zm9.6 0h9.2c7.1 0 9.2 5.2 8.5 9.5-.6 4.2-4 9-10.2 9h-10.3l2.8-18.5zm6 14.1c3.1 0 4.9-1.5 5.4-4.8.4-2.4-.4-4.8-3.8-4.8h-1.8l-1.5 9.7 1.7-.1z"}))}},91955:function(e,r,t){t.d(r,{d:function(){return z}});var n=t(67294),a=t(27747),l=t(51057),o=t(90769),i=t(8307),c=t(4730),s=t(19673),d=t(38671),u=t(66689),h=t(83667),b=t(85893);let p=["autoStartToken"];function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function f(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach(function(r){(0,i.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let m=e=>{let{autoStartToken:r,isIOS:t}=e,n=new URLSearchParams;return r&&n.set("autostarttoken",r),t?n.set("redirect","tradera-native://bank_id"):n.set("redirect","null"),`bankid:///?${n}`};var k=e=>{let{autoStartToken:r}=e,t=(0,c.Z)(e,p),{t:n}=(0,l.I4)(),a=(0,d.Z)(),i=(0,s.T)(),{bankIdOrderRef:v}=(0,s.C)(e=>e.bankId),{isIOS:k}=(0,s.C)(e=>e.environment),O=m({autoStartToken:r,isIOS:null!=k&&k}),j=async()=>{await h.SD.post("/auth/bankid/cancel",{bankIdOrderRef:v});let e=await i((0,u.MA)());e&&(window.location.href=m({autoStartToken:e,isIOS:!1}))};return(0,b.jsx)(o.z,f(f({onClick:a?void 0:j,href:a?O:void 0,rel:"noopener noreferrer",theme:"primary",role:"button",loading:!r},t),{},{children:n("bankIdModal_OpenAppOnThisDevice")}))},O=t(78227),j=t(9981),I=t(3316);let g=e=>{let{onClose:r}=e,{t}=(0,l.I4)();return(0,b.jsx)(o.z,{theme:"link",onClick:r,children:t("bankIdModal_Cancel")})},y=e=>{let{onClose:r,modalState:t,autoStartToken:n,mobileFlow:i,setMobileFlow:c}=e,{t:s}=(0,l.I4)(),d=(0,I.Z)(),u=(0,j.N)("bankid-on-file");switch(t){case a.X.IN_PROGRESS:return(0,b.jsxs)(O.T,{direction:"vertical",gap:2,align:"center",children:[(!d||u)&&(0,b.jsx)(k,{autoStartToken:n,fluid:!0,variant:i?"filled":"outline"}),i&&(0,b.jsx)(o.z,{theme:"primary",variant:"outline",fluid:!0,onClick:()=>c(e=>!e),children:s("bankIdModal_OpenOnOtherDevice")}),(0,b.jsx)(g,{onClose:r})]});case a.X.ERROR:return(0,b.jsx)("div",{className:"text-center",children:(0,b.jsx)(g,{onClose:r})})}return null};var x=t(10023);let S=e=>{let{errorCode:r}=e,{t}=(0,l.I4)(),n="";switch(r){case"START_FAILED":n=t("bankId_error_start_failed");break;case"EXPIRED_TRANSACTION":n=t("bankId_error_expired_transaction");break;case"ALREADY_IN_PROGRESS":n=t("bankId_error_already_in_progress");break;case"CERTIFICATE_ERROR":n=t("bankId_error_certificate_error");break;case"CANCELLED":n=t("bankId_error_cancelled");break;case"USER_CANCEL":n=t("bankId_error_user_cancel");break;default:n=t("bankId_error_default")}return(0,b.jsx)("p",{children:n})},w=e=>{let{modalState:r,errorCode:t,qrData:n}=e,{t:o}=(0,l.I4)();switch(r){case a.X.IN_PROGRESS:return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h1",{className:"heading-berlin text-styled mt-3",children:o("bankIdModal_InProgressTitle")}),(0,b.jsx)("p",{children:o("bankIdModal_InProgressText")}),(0,b.jsx)("div",{className:"my-4",children:n&&(0,b.jsx)("img",{src:`data:image/png;base64, ${n}`,style:{width:"300px"},alt:""})})]});case a.X.ERROR:return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h1",{className:"heading-berlin text-styled mt-3",children:o("bankIdModal_ErrorTitle")}),(0,b.jsx)(S,{errorCode:t})]});default:return null}};var _=t(38284),R=t(1046),D=t(78381);let E=["className"];function T(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}let C=e=>{let{className:r}=e,t=(0,c.Z)(e,E);return(0,b.jsx)(R.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?T(Object(t),!0).forEach(function(r){(0,i.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({className:(0,D.A)("icon",r),color:"#183E4F"},t))},P=[a.X.CLOSED,a.X.COMPLETED],z=e=>{let{onTop:r,onClose:t}=e,l=(0,s.T)(),o=(0,d.Z)(),[i,c]=n.useState(o),{errorCode:u,autoStartToken:p,qrData:v,modalState:f,bankIdOrderRef:m,contactSsn:k,organizationNumber:O}=(0,s.C)(e=>e.bankId),j=(0,n.useCallback)(async()=>{l((0,x.xv)()),null==t||t(),c(o),f===a.X.IN_PROGRESS&&m&&(k?h.SD.post("/auth/bankid/cancel-signatory",{bankIdOrderRef:m,contactSsn:k,organizationNumber:O}):h.SD.post("/auth/bankid/cancel",{bankIdOrderRef:m}))},[l,t,o,f,k,O,m]);return P.includes(f)?null:(0,b.jsx)(_.W,{show:!0,onTop:r,maxWidth:"38rem",maxHeight:"52rem",mobileBottomSheet:!0,onClose:j,children:(0,b.jsxs)("div",{className:"d-flex flex-column justify-content-between px-3 pt-2",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(C,{style:{height:"87px",width:"92px"}}),(0,b.jsx)(w,{modalState:f,errorCode:u,qrData:i?void 0:v})]}),(0,b.jsx)("div",{children:(0,b.jsx)(y,{setMobileFlow:c,mobileFlow:i,onClose:j,modalState:f,autoStartToken:p})})]})})}},66689:function(e,r,t){t.d(r,{B9:function(){return h},MA:function(){return b},sO:function(){return u}});var n=t(27747),a=t(10023),l=t(83667),o=t(23376),i=t(83923),c=t(80129),s=t.n(c);let d=e=>new Promise(r=>setTimeout(r,e)),u=(e,r,t,n,o)=>async c=>{c((0,a.mc)()),c((0,a.Yf)({purpose:t}));try{var s;let{data:d}=n?await l.SD.post("/auth/bankid/authenticate-signatory",{purpose:t,organizationNumber:o,contactSsn:n}):await l.SD.post("/auth/bankid/authenticate",{purpose:t}),u=null===(s=d.responseStatus)||void 0===s?void 0:s.errorCode;if(u){c((0,a.sT)(u)),r(u),(0,i.k)(`BankId: received error code ${u}`);return}c((0,a.x5)({autoStartToken:null==d?void 0:d.autoStartToken,qrData:null==d?void 0:d.qrData,bankIdOrderRef:null==d?void 0:d.bankIdOrderRef,contactSsn:n,organizationNumber:o})),c(p(e,r,n,o))}catch(e){c((0,a.sT)(void 0)),r(void 0),(0,i.k)(`BankId: received exception ${null==e?void 0:e.message}`)}},h=(e,r,t,n)=>async o=>{o((0,a.mc)()),o((0,a.Yf)({purpose:t}));try{var c;let{data:t}=await l.SD.post("/member/profile/bankId-recovery-with-id",{memberId:n}),s=null===(c=t.responseStatus)||void 0===c?void 0:c.errorCode;if(s){o((0,a.sT)(s)),r(s),(0,i.k)(`BankId: received error code ${s}`);return}o((0,a.x5)({autoStartToken:null==t?void 0:t.autoStartToken,qrData:null==t?void 0:t.qrData,bankIdOrderRef:null==t?void 0:t.bankIdOrderRef})),o(p(e,r,void 0,void 0,n))}catch(e){o((0,a.sT)(void 0)),r(void 0),(0,i.k)(`BankId: received exception ${null==e?void 0:e.message}`)}},b=()=>async(e,r)=>{let{bankId:t}=r();e((0,a.Yf)({purpose:t.purpose}));let n=null;try{var o,c,s;let{data:r}=await l.SD.post("/auth/bankid/authenticate-on-file",{purpose:t.purpose}),d=null===(o=r.responseStatus)||void 0===o?void 0:o.errorCode;if(d){e((0,a.sT)(d)),(0,i.k)(`BankId on file: received error code ${d}`);return}n=null!==(c=null==r?void 0:r.autoStartToken)&&void 0!==c?c:null;let u=null!==(s=null==r?void 0:r.bankIdOrderRef)&&void 0!==s?s:void 0;e((0,a.x5)({autoStartToken:n,bankIdOrderRef:u}))}catch(r){e((0,a.sT)(void 0)),(0,i.k)(`BankId on file: received exception ${null==r?void 0:r.message}`)}return n},p=(e,r,t,i,c)=>async(u,h)=>{let{modalState:b,bankIdOrderRef:v,errorCode:f}=h().bankId;if(b===n.X.ERROR){r(null!=f?f:void 0);return}if(b===n.X.IN_PROGRESS){if(!v){await d(3e3),u(p(e,r,t,i));return}try{var m;let{data:n}=t?await l.SD.get(`/auth/bankid/member-identification-progress-signatory?bankIdOrderRef=${v}&organizationNumber=${i}&contactSsn=${t}`):c?await l.SD.get(`/member/profile/bankId-progress-with-id?${s().stringify({bankIdOrderRef:v,memberId:c})}`):await l.SD.get(`/auth/bankid/progress?bankIdOrderRef=${v}`),h=null===(m=n.responseStatus)||void 0===m?void 0:m.errorCode;if(h){u((0,a.sT)(h)),r(h);return}if(null!=n&&n.isCompleted){u((0,a.d8)()),(0,o.XA)("bankIdModal_verificationCompletedTitle"),e(v);return}u((0,a.x5)({qrData:null==n?void 0:n.qrData})),await d(3e3),u(p(e,r,t,i,c))}catch{u((0,a.sT)(void 0)),r(void 0)}}}}}]);
//# sourceMappingURL=1955-588d240452bf93e5.js.map